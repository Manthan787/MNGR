<div class="rightside">
  <div class="page-head">
      <h1>
        <i class="fa fa-print"> </i>
        Create Test
        <small>Create Printable Offline Tests</small>
      </h1>
  </div>
  <div class="content">
    <div class="row">
      <div class="container">
        <feedback></feedback>
        <loading></loading>
        <div class="row">
          <div class="col-md-8 col-md-offset-2">
            <div class="box">
                <div class="box-title">
                    <h3>Create Test</h3>
                </div>
                <div class="box-body">
                    <form  class="form-horizontal" name="createTestForm" ng-submit="createTest(createTestForm.$valid)" novalidate>
                        <div class="form-group" ng-class="{'has-error':(submitted && createTestForm.name.$invalid) || (createTestForm.name.$invalid && createTestForm.name.$dirty)}">
                            <label class="col-sm-2 control-label">Name</label>
                            <div class="col-sm-10">
                                <input type="text" name="name" class="form-control" ng-model="newTest.name" required>
                                <p class="help-block" ng-if="(submitted && createTestForm.name.$invalid) || (createTestForm.name.$invalid && createTestForm.name.$dirty)">Name is required.</p>
                            </div>
                        </div>
                        <div class="form-group" ng-class="{'has-error':(submitted && createTestForm.marks.$invalid) || (createTestForm.marks.$invalid && createTestForm.marks.$dirty)}">
                            <label class="col-sm-2 control-label">Marks</label>
                            <div class="col-sm-10">
                                <input type="number" name="marks" class="form-control" ng-model="newTest.marks" required>
                                <p class="help-block" ng-if="(submitted && createTestForm.marks.$error.required) || (createTestForm.marks.$error.required && createTestForm.marks.$dirty)">Marks is required.</p>
                                <p class="help-block" ng-if="(submitted && createTestForm.marks.$error.number) || (createTestForm.marks.$error.number && createTestForm.marks.$dirty)">Enter a valid number.</p>
                            </div>
                        </div>
                        <div class="form-group" ng-class="{'has-error' : (submitted && createTestForm.subject.$invalid) || (createTestForm.subject.$invalid && createTestForm.subject.$dirty)}">
                            <label class="col-sm-2 control-label">Subject</label>
                            <div class="col-sm-10">
                                <select type="text" name="subject" class="form-control" ng-model="newTest.subject_id" ng-change="getChapters(newTest.subject_id)" required>
                                    <option value="">Select Subject</option>
                                    <option ng-repeat="subject in subjects" value="{{subject.id}}">{{ subject.name }} ({{subject.standard.division}})</option>
                                </select>
                                <p class="help-block" ng-if="(submitted && createTestForm.subject.$invalid) || (createTestForm.subject.$invalid && createTestForm.subject.$dirty)">This field is required.</p>
                            </div>
                        </div>
                        <div class="form-group" ng-if="hasChapters" ng-class="{'has-error' : (submitted && createTestForm.chapters.$invalid) || (createTestForm.chapters.$invalid && createTestForm.chapters.$dirty)}">
                            <label class="col-sm-2 control-label">Chapters</label>
                            <div class="col-sm-10">
                                <select type="text" name="chapters" class="form-control" ng-options="chapter.id as chapter.title for chapter in chapters" ng-model="newTest.chapters" required multiple ng-multiple="true">
                                </select>
                                <p class="help-block" ng-if="(submitted && createTestForm.chapters.$invalid) || (createTestForm.chapters.$invalid && createTestForm.chapters.$dirty)">This field is required.</p>
                            </div>
                        </div>
                        <div class="form-group has-warning" ng-if="noChaptersError">
                            <label class="col-sm-2 control-label">Warning</label>
                            <div class="col-sm-10">
                                <div class="alert alert-warning" align="center">The subject you selected doesn't have any chapters. Please add some chapters to this subject and try again later.</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Layout</label>
                            <div class="col-sm-10" ng-init="newTest.layout = 'horizontal'">
                              <div class="col-md-6">
                                <label>
                                  <input type="radio" name="layout" ng-model="newTest.layout" value="horizontal" checked> Horizontal Options
                                  <img src="app/admin/img/horizontal.png" class="img-responsive" width="250px">
                                </label>
                              </div>
                              <div class="col-md-6">
                                <label>
                                  <input type="radio" name="layout" ng-model="newTest.layout" value="vertical"> Vertical Options
                                  <img src="app/admin/img/vertical.png" class="img-responsive" width="250px" border="1">
                                </label>
                              </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div align="center">
                                <input type="submit" class="btn btn-success" value="Generate Test" ng-disabled="noChaptersError">
                            </div>
                        </div>
                    </form>
                </div>
              </div>
            </div>
         </div>
      </div>
    </div>
  </div>
</div>
